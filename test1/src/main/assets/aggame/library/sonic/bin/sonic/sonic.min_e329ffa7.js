function drawFlame(t,i,s,e){this._.fillStyle=t,this._.beginPath(),this._.arc(i,s,e,0,2*Math.PI,!1),this._.closePath(),this._.fill()}function preLoading(t){var i,s=document.getElementById("egret-div");i=new Sonic(SonicLoaders[t]),s.appendChild(i.canvas),i.play()}function preDismiss(){var t=document.getElementById("egret-div"),i=document.getElementById("snoic-canvas");i&&t.removeChild(i)}!function(){function t(t){this.converter=t.converter,this.data=t.path||t.data,this.imageData=[],this.multiplier=t.multiplier||1,this.padding=t.padding||0,this.fps=t.fps||25,this.stepsPerFrame=~~t.stepsPerFrame||1,this.trailLength=t.trailLength||1,this.pointDistance=t.pointDistance||.05,this.domClass=t.domClass||"sonic",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.fillColor=t.fillColor,this.strokeColor=t.strokeColor,this.stepMethod="string"==typeof t.step?a[t.step]:t.step||a.square,this._setup=t.setup||i,this._teardown=t.teardown||i,this._preStep=t.preStep||i,this.width=t.width,this.height=t.height,this.fullWidth=this.width+2*this.padding,this.fullHeight=this.height+2*this.padding,this.domClass=t.domClass||"sonic",this.setup()}var i=function(){},s=t.argTypes={DIM:1,DEGREE:2,RADIUS:3,OTHER:0},e=t.argSignatures={arc:[1,1,3,2,2,0],bezier:[1,1,1,1,1,1,1,1],line:[1,1,1,1]},h=t.pathMethods={bezier:function(t,i,s,e,h,a,r,n,l){t=1-t;var o=1-t,c=t*t,p=o*o,d=c*t,u=3*c*o,f=3*t*p,g=p*o;return[d*i+u*a+f*n+g*e,d*s+u*r+f*l+g*h]},arc:function(t,i,s,e,h,a){var r=(a-h)*t+h,n=[Math.cos(r)*e+i,Math.sin(r)*e+s];return n.angle=r,n.t=t,n},line:function(t,i,s,e,h){return[(e-i)*t+i,(h-s)*t+s]}},a=t.stepMethods={square:function(t,i,s,e,h){this._.fillRect(t.x-3,t.y-3,6,6)},fader:function(t,i,s,e,h){this._.beginPath(),this._last&&this._.moveTo(this._last.x,this._last.y),this._.lineTo(t.x,t.y),this._.closePath(),this._.stroke(),this._last=t}};t.prototype={setup:function(){var t,i,a,r,n=this.data;this.canvas=document.createElement("canvas"),this._=this.canvas.getContext("2d"),this.canvas.className=this.domClass,this.canvas.id="snoic-canvas",this.canvas.height=this.fullHeight,this.canvas.width=this.fullWidth,this.points=[];for(var l=-1,o=n.length;++l<o;){if(t=n[l].slice(1),a=n[l][0],a in e)for(var c=-1,p=t.length;++c<p;){switch(i=e[a][c],r=t[c],i){case s.RADIUS:r*=this.multiplier;break;case s.DIM:r*=this.multiplier,r+=this.padding;break;case s.DEGREE:r*=Math.PI/180}t[c]=r}t.unshift(0);for(var d,u=this.pointDistance,f=u;1>=f;f+=u)f=Math.round(1*f/u)/(1/u),t[0]=f,d=h[a].apply(null,t),this.points.push({x:d[0],y:d[1],progress:f})}this.frame=0,this.converter&&this.converter.setup&&this.converter.setup(this)},prep:function(t){if(!(t in this.imageData)){this._.clearRect(0,0,this.fullWidth,this.fullHeight),this._.fillStyle=this.backgroundColor,this._.fillRect(0,0,this.fullWidth,this.fullHeight);var i,s,e,h=this.points,a=h.length;this.pointDistance;this._setup();for(var r=-1,n=a*this.trailLength;++r<n&&!this.stopped;)s=t+r,i=h[s]||h[s-a],i&&(this.alpha=Math.round(1e3*(r/(n-1)))/1e3,this._.globalAlpha=this.alpha,this.fillColor&&(this._.fillStyle=this.fillColor),this.strokeColor&&(this._.strokeStyle=this.strokeColor),e=t/(this.points.length-1),indexD=r/(n-1),this._preStep(i,indexD,e),this.stepMethod(i,indexD,e));return this._teardown(),this.imageData[t]=this._.getImageData(0,0,this.fullWidth,this.fullWidth),!0}},draw:function(){this.prep(this.frame)||(this._.clearRect(0,0,this.fullWidth,this.fullWidth),this._.putImageData(this.imageData[this.frame],0,0)),this.converter&&this.converter.step&&this.converter.step(this),this.iterateFrame()||this.converter&&this.converter.teardown&&(this.converter.teardown(this),this.converter=null)},iterateFrame:function(){return this.frame+=this.stepsPerFrame,this.frame>=this.points.length?(this.frame=0,!1):!0},play:function(){this.stopped=!1;var t=this;this.timer=setInterval(function(){t.draw()},1e3/this.fps)},stop:function(){this.stopped=!0,this.timer&&clearInterval(this.timer)}},window.Sonic=t}();var SonicLoaders=[{width:100,height:50,padding:10,stepsPerFrame:2,trailLength:1,pointDistance:.03,strokeColor:"#FF7B24",step:"fader",multiplier:2,setup:function(){this._.lineWidth=5},path:[["arc",10,10,10,-270,-90],["bezier",10,0,40,20,20,0,30,20],["arc",40,10,10,90,-90],["bezier",40,0,10,20,30,0,20,20]]},{width:100,height:100,stepsPerFrame:4,trailLength:.8,pointDistance:.01,fps:20,path:[["arc",60,60,30,0,360]],step:function(t,i,s){var e=10,h=e*(i>.5?1-i:i);drawFlame.call(this,"#FF6C08",t.x*i,t.y,h),drawFlame.call(this,"#FFD341",t.x,t.y*i,h),drawFlame.call(this,"#FF3000",t.x,t.y,h)}}];