var DateFormat=function(){"use strict";function e(e){return u[parseInt(e,10)]||e}function a(e){return c[parseInt(e,10)]||e}function t(e){var a=parseInt(e,10)-1;return l[a]||e}function r(e){var a=parseInt(e,10)-1;return h[a]||e}function n(e){return y[e]||e}function s(e){var a,t,r,n,s,o=e,i="";return-1!==o.indexOf(".")&&(n=o.split("."),o=n[0],i=n[n.length-1]),s=o.split(":"),3===s.length?(a=s[0],t=s[1],r=s[2].replace(/\s.+/,"").replace(/[a-z]/gi,""),o=o.replace(/\s.+/,"").replace(/[a-z]/gi,""),{time:o,hour:a,minute:t,second:r,millis:i}):{time:"",hour:"",minute:"",second:"",millis:""}}function o(e,a){for(var t=a-String(e).length,r=0;t>r;r++)e="0"+e;return e}function i(){}var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],y={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},d=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/,f=i.prototype;return f.parseDate=function(e){var a,t,r={date:null,year:null,month:null,dayOfMonth:null,dayOfWeek:null,time:null};if("number"==typeof e)return this.parseDate(new Date(e));if("function"==typeof e.getFullYear)r.year=String(e.getFullYear()),r.month=String(e.getMonth()+1),r.dayOfMonth=String(e.getDate()),r.time=s(e.toTimeString()+"."+e.getMilliseconds());else if(-1!=e.search(d))a=e.split(/[T\+-]/),r.year=a[0],r.month=a[1],r.dayOfMonth=a[2],r.time=s(a[3].split(".")[0]);else switch(a=e.split(" "),6===a.length&&isNaN(a[5])&&(a[a.length]="()"),a.length){case 6:r.year=a[5],r.month=n(a[1]),r.dayOfMonth=a[2],r.time=s(a[3]);break;case 2:t=a[0].split("-"),r.year=t[0],r.month=t[1],r.dayOfMonth=t[2],r.time=s(a[1]);break;case 7:case 9:case 10:r.year=a[3],r.month=n(a[1]),r.dayOfMonth=a[2],r.time=s(a[4]);break;case 1:t=a[0].split(""),r.year=t[0]+t[1]+t[2]+t[3],r.month=t[5]+t[6],r.dayOfMonth=t[8]+t[9],r.time=s(t[13]+t[14]+t[15]+t[16]+t[17]+t[18]+t[19]+t[20]);break;default:return null}return r.time?r.date=new Date(r.year,r.month-1,r.dayOfMonth,r.time.hour,r.time.minute,r.time.second,r.time.millis):r.date=new Date(r.year,r.month-1,r.dayOfMonth),r.dayOfWeek=String(r.date.getDay()),r},f.date=function(n,s){try{var i=this.parseDate(n);if(null===i)return n;for(var u,c=i.year,l=i.month,h=i.dayOfMonth,y=i.dayOfWeek,d=i.time,f="",m="",b="",k=!1,g=0;g<s.length;g++){var p=s.charAt(g),M=s.charAt(g+1);if(k)"'"==p?(m+=""===f?"'":f,f="",k=!1):f+=p;else switch(f+=p,b="",f){case"ddd":m+=e(y),f="";break;case"dd":if("d"===M)break;m+=o(h,2),f="";break;case"d":if("d"===M)break;m+=parseInt(h,10),f="";break;case"D":h=1==h||21==h||31==h?parseInt(h,10)+"st":2==h||22==h?parseInt(h,10)+"nd":3==h||23==h?parseInt(h,10)+"rd":parseInt(h,10)+"th",m+=h,f="";break;case"MMMM":m+=r(l),f="";break;case"MMM":if("M"===M)break;m+=t(l),f="";break;case"MM":if("M"===M)break;m+=o(l,2),f="";break;case"M":if("M"===M)break;m+=parseInt(l,10),f="";break;case"y":case"yyy":if("y"===M)break;m+=f,f="";break;case"yy":if("y"===M)break;m+=String(c).slice(-2),f="";break;case"yyyy":m+=c,f="";break;case"HH":m+=o(d.hour,2),f="";break;case"H":if("H"===M)break;m+=parseInt(d.hour,10),f="";break;case"hh":u=0===parseInt(d.hour,10)?12:d.hour<13?d.hour:d.hour-12,m+=o(u,2),f="";break;case"h":if("h"===M)break;u=0===parseInt(d.hour,10)?12:d.hour<13?d.hour:d.hour-12,m+=parseInt(u,10),f="";break;case"mm":m+=o(d.minute,2),f="";break;case"m":if("m"===M)break;m+=d.minute,f="";break;case"ss":m+=o(d.second.substring(0,2),2),f="";break;case"s":if("s"===M)break;m+=d.second,f="";break;case"S":case"SS":if("S"===M)break;m+=f,f="";break;case"SSS":var S="000"+d.millis.substring(0,3);m+=S.substring(S.length-3),f="";break;case"a":m+=d.hour>=12?"PM":"AM",f="";break;case"p":m+=d.hour>=12?"p.m.":"a.m.",f="";break;case"E":m+=a(y),f="";break;case"'":f="",k=!0;break;default:m+=p,f=""}}return m+=b}catch(D){return console&&console.log&&console.log(D),n}},f.prettyDate=function(e){var a,t,r;return("string"==typeof e||"number"==typeof e)&&(a=new Date(e)),"object"==typeof e&&(a=new Date(e.toString())),t=((new Date).getTime()-a.getTime())/1e3,r=Math.floor(t/86400),isNaN(r)||0>r?void 0:60>t?"just now":120>t?"1 minute ago":3600>t?Math.floor(t/60)+" minutes ago":7200>t?"1 hour ago":86400>t?Math.floor(t/3600)+" hours ago":1===r?"Yesterday":7>r?r+" days ago":31>r?Math.ceil(r/7)+" weeks ago":r>=31?"more than 5 weeks ago":void 0},f.toBrowserTimeZone=function(e,a){return this.date(new Date(e),a||"MM/dd/yyyy HH:mm:ss")},i}();egret.registerClass(DateFormat,"DateFormat");